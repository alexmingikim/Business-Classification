# Mondiale Client Industry Classification Pipeline

This pipeline is used to classify Mondiale’s clients based on the industry they operate in.

Classifications are provided for two different standards:
- **BIC** – Business Industry Classification
- **ANZSIC** – Australia and New Zealand Standard Industrial Classification

Industry classifications are generated by inputting company names (provided by Mondiale) and using the OpenAI API:
1. Perform web searches
2. Infer each company’s main business model
3. Match the company with the most appropriate BIC and ANZSIC codes

## Files and Scripts
- **bic_codes.csv** - Reference table containing BIC codes and descriptions
- **bic_to_anzsic_mapping.csv** - Mapping table from BIC codes to ANZSIC codes
- **get_business_classification.py** - Classifies businesses into BIC codes based on descriptions
- **get_business_description.py** - Generates descriptions of each business using the OpenAI API

## Getting Started

### Requirements
- Install dependencies listed in requirements.txt: 

    ```pip install -r requirements.txt```

- Set your OpenAI API key as an environment variable: 

    ```export OPENAI_API_KEY = "SPECIFY KEY HERE"```

- If needed, generate a new API key on the FDL OpenAI API platform

### Step 1 Prepare Input Files

Split the list of business names into separate files containing 25 names each (this is required by the API limits).

### Step 2 Generate Business Descriptions

Use the OpenAI API to research and generate descriptions of what each business does:

```python3 get_business_description.py --num-files [NUMBER OF FILES]```

This will create output files containing a short description for each business.

### Step 3 Classify Businesses to BIC Codes

Classify businesses based on their main business model descriptions:

```python3 get_business_classification.py --num-files [NUMBER OF FILES]```

**Requirements:** 
- ```bic_codes.csv``` must be present and accessible to the script.

At this step, outputs from all separate files can be aggregated into a single file.

### Step 4 Map BIC Codes to ANZSIC Codes

Associate ANZSIC codes with output from Step 3:
1. Upload the classification output from Step 3 and bic_to_anzsic_mapping.csv to Snowflake.
2. Perform a join on the BIC code to obtain the corresponding ANZSIC code.

Note: The mapping from BIC to ANZSIC is Many-to-One

---

## Observed Performance and Improvement Areas

- On a run with ~8,300 businesses, the pipeline successfully classified **approximately 85%** of businesses.
- Manual inspection suggests that where classifications were made, the vast majority were correct classifications.
- Where classifications were incorrect or missing, common causes included:
    - Ambiguous business names which could represent multiple companies, making it difficult to determine the correct industry.
    - Multi-activity businesses (e.g. companies involved in both manufacturing and retail/wholesale), where the model classified only one aspect (typically either manufacturing or retail/wholesale, but not both).

Potential improvements could include:
- Providing additional context (e.g. country, website) where available.
- Introducing custom rules or post-processing logic for multi-activity businesses.
- Implementing a confidence score threshold and flagging low-confidence classifications for manual review.

## Costs
Per batch of 25 businesses (approximate):
- Generating business descriptions
    - Cost: USD **$0.15–$0.25** per batch
    - Runtime: **2–3 minutes** per batch
- Classifying businesses to BIC codes
    - Cost: USD **$0.15–$0.25** per batch
    - Runtime: **2–3 minutes** per batch

## AI Models Used 
- Business description generation: gpt-5-mini
- Business classification: gpt-5-mini

Based on testing, these models gave the best performance with respect to accuracy, time and cost.